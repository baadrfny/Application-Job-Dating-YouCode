{% extends "layouts/main.twig" %}

{% block title %}Job Announcements - YouCode{% endblock %}

{% block content %}
<div class="page-wrapper">

    <!-- Header -->
    <div class="page-header">
        <h1>Job Announcements</h1>
        <p>Manage all your current job listings.</p>
    </div>

    <!-- Search -->
    <div class="search-wrapper">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search announcements..." />
    </div>

    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-icon blue">
                <i class="fas fa-briefcase"></i>
            </div>
            <div>
                <span>Active Jobs</span>
                <strong>{{ stats.active_annonces }}</strong>
            </div>
        </div>

        <div class="stat-box">
            <div class="stat-icon green">
                <i class="fas fa-building"></i>
            </div>
            <div>
                <span>Companies</span>
                <strong>{{ stats.total_entreprises }}</strong>
            </div>
        </div>
    </div>

    <!-- Job List -->
    <div class="jobs-grid">
        {% for annonce in latestAnnonces %}
        <div class="job-card">

            <div class="job-top">
                <span class="job-type">{{ annonce.type_contrat }}</span>
                <span class="job-date">{{ annonce.created_at|date("d M Y") }}</span>
            </div>

            <h3>{{ annonce.titre }}</h3>

            <p class="job-meta">
                {{ annonce.entreprise_nom }} â€¢ {{ annonce.localisation }}
            </p>

            <div class="job-actions">
                <a href="/admin/announcements/edit/{{ annonce.id }}">
                    Edit <i class="fas fa-pen"></i>
                </a>

                <form action="/admin/announcements/delete" method="POST"
                      onsubmit="return confirm('Delete this listing?');">
                    <input type="hidden" name="id" value="{{ annonce.id }}">
                    <button type="submit">
                        <i class="fas fa-trash"></i>
                    </button>
                </form>
            </div>

        </div>
        {% else %}
        <p class="empty">No announcements found.</p>
        {% endfor %}
    </div>

    <!-- Add Button -->
    <a href="/admin/announcements/create" class="fab">
        <i class="fas fa-plus"></i>
    </a>

</div>

<style>
/* Layout */
body {
    background: #f6f8fc;
}

.page-wrapper {
    max-width: 1100px;
    margin: auto;
    padding: 32px 24px;
}

/* Header */
.page-header h1 {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 4px;
}

.page-header p {
    color: #6b7280;
    margin-bottom: 28px;
}

/* Search */
.search-wrapper {
    background: #fff;
    border-radius: 14px;
    padding: 14px 18px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,.06);
    margin-bottom: 32px;
}

.search-wrapper input {
    border: none;
    outline: none;
    width: 100%;
    font-size: 15px;
}

/* Stats */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.stat-box {
    background: #fff;
    border-radius: 16px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,.06);
}

.stat-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stat-icon.blue { background: #eef2ff; color: #2563eb; }
.stat-icon.green { background: #ecfdf5; color: #16a34a; }

.stat-box span {
    font-size: 12px;
    color: #6b7280;
    text-transform: uppercase;
}

.stat-box strong {
    font-size: 22px;
    display: block;
}

/* Jobs */
.jobs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 24px;
}

.job-card {
    background: #fff;
    border-radius: 18px;
    padding: 22px;
    box-shadow: 0 12px 30px rgba(0,0,0,.08);
    transition: transform .2s ease;
}

.job-card:hover {
    transform: translateY(-4px);
}

.job-top {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    margin-bottom: 12px;
}

.job-type {
    color: #2563eb;
    font-weight: 700;
    text-transform: uppercase;
}

.job-date {
    color: #9ca3af;
}

.job-card h3 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 6px;
}

.job-meta {
    color: #6b7280;
    font-size: 14px;
    margin-bottom: 16px;
}

.job-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.job-actions a {
    color: #2563eb;
    font-weight: 600;
    text-decoration: none;
}

.job-actions button {
    border: none;
    background: none;
    color: #9ca3af;
}

.job-actions button:hover {
    color: #ef4444;
}

/* FAB */
.fab {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    background: #2563eb;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 15px 35px rgba(37,99,235,.5);
}

/* Empty */
.empty {
    color: #6b7280;
}
</style>
{% endblock %}


